digraph G {
    labeljust=r;
    node [shape=box width=1.75];

    subgraph cluster0 {
        label="Clusterization";
        graph[style=dashed];

        activations [label="Cells" group=g1];
        clusters [label="Clusters" group=g1];
        measurements [label="Measurements" group=g1];

        activations -> clusters [color="black"];
        activations -> clusters [label="CCL" color="blue" style="dashed"];
        activations -> measurements [label="CCA" color="green"];
        clusters -> measurements [color="black"];
        clusters -> measurements [color="blue" style="dashed"];
    }

    measurements -> spacepoints [color="black"];
    measurements -> spacepoints [color="green" style="dashed"];
    measurements -> spacepoints [color="blue" style="dashed"];

    subgraph cluster1 {
        label="Track finding";
        graph[style=dashed];

        spacepoints [label="Spacepoints" group=g1];
        bins [label="Bins" group=g1];
        seeds [label="Seeds" group=g1];
        prototracks [label="Prototracks" group=g1];

        spacepoints -> bins [color="green"];
        spacepoints -> bins [label="Binning" color="black"];
        spacepoints -> seeds [label="Seeding" color="green" style="dashed"];
        bins -> seeds [color="blue"];
        bins -> seeds [color="green"];
        bins -> seeds [label="Seeding" color="black" style="dashed"];
        seeds -> prototracks [color="green"];
        seeds -> prototracks [label="Track parameter estimation" color="black"];
    }

    prototracks -> tracks [label="Combinatorial Kalman filter" style="dotted"];

    subgraph cluster2 {
        label="Track fitting";
        graph[style=dashed];

        tracks [label="Tracks" peripheries=2 group=g1];

        tracks -> tracks [style="dashed" color="green"];
        tracks -> tracks [label="Kalman filter" style="dashed" color="black"];
    }
}
